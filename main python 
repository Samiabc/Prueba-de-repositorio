from JsonWriter import JsonWriter
from JsonReader import JsonReader
import json
import os

FILE = "datos.json"

def cargar_o_iniciar():
    if not os.path.exists(FILE):
        JsonWriter.save(FILE, [])
    return JsonReader.read(FILE)

def guardar(datos):
    JsonWriter.save(FILE, datos)

def menu():
    while True:
        print("\n=== MENÚ JSON ===")
        print("1. Agregar dato")
        print("2. Leer JSON")
        print("3. Salir")
        opcion = input("Opción: ")

        if opcion == "1":
            datos = cargar_o_iniciar()
            nuevo = input("Escribe algo para guardar: ")
            datos.append(nuevo)
            guardar(datos)
            print("✔ Dato agregado.")

        elif opcion == "2":
            datos = cargar_o_iniciar()
            print("\nContenido del JSON:")
            print(json.dumps(datos, indent=4, ensure_ascii=False))

        elif opcion == "3":
            print("Saliendo...")
            break

        else:
            print("Opción inválida, intenta de nuevo.")

menu()
